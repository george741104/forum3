<h4>hi !  <%=current_user.email%></h4>

<h2>Posts List</h2>


<%=link_to"Add Post", new_post_path, :class=>"btn btn-warning"%>
<%= link_to "Default", posts_path(:order =>'id'),:class=>"btn btn-default"%>
<%= link_to "Created Time", posts_path(:order =>'created_at'), :class=>"btn btn-default"%>
<%= link_to "Most Commented", posts_path(:order =>'comment_count'), :class=>"btn btn-default"%>

<hr>

  <%#=collection_select( :post, :category_id, Category.all, :id, :name, prompt: true)%>
<%=form_for @post, :url => posts_path, :method=> :get, :class=>"form" do |c|%>


  <%=c.collection_select( :category_id, Category.all, :id, :name, prompt: true)%>
  <%=c.submit "Go", :class => 'btn btn-primary'%>
<%end%>

<br>


<table class="table table-responsive table-hover">
  <tr>
    <th>Title</th>
    <th>Author</th>
    <th>Category</th>
    <th colspan="3">Operation</th>
  </tr>

  <% @posts.each do |p|%>
  <tr>
    <td><%=p.title%></td>
    <td><%=p.user.try(:email)%></td>

    <td><% cc = '' %>
      <%p.categories.each do |c|%>
        <% cc += c.name + ' '  %>
        <% end %>
        <%= cc %></td>
    <td><%=link_to "Show", post_path(p) ,:class=>'btn btn-primary'%></td>
    <td><%=link_to "Edit", edit_post_path(p) ,:class=>'btn btn-primary'%></td>
    <td><%=link_to "Delete", post_path(p), :method => :delete ,:class=>'btn btn-primary'%></td>
  </tr>
  <%end%>
</table>
<%= paginate @posts %>
